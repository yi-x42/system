# Radmin ç¶²çµ¡ API é€£æ¥ä¿®å¾©å ±å‘Š

## ğŸ”§ ä¿®å¾©æ—¥æœŸï¼š2025å¹´8æœˆ10æ—¥

### ğŸ“‹ å•é¡Œæè¿°
ç”¨æˆ¶å ±å‘Šçµ„å“¡é€šé Radmin ç¶²çµ¡è¨ªå• `http://26.86.64.166:8001/website/` æ™‚ï¼ŒAPI è«‹æ±‚æœƒå‡ºéŒ¯ï¼ŒåŸå› æ˜¯å‰ç«¯ä»£ç¢¼ä¸­ç¡¬ç·¨ç¢¼äº† `localhost` æˆ– `127.0.0.1` çš„ API åœ°å€ã€‚

### âœ… ä¿®å¾©å…§å®¹

#### 1. å‰µå»ºé€šç”¨ API é…ç½®ç³»çµ±
- **æ–‡ä»¶**: `website_prototype/api-config.js`
- **åŠŸèƒ½**: 
  - è‡ªå‹•åµæ¸¬ç•¶å‰é‹è¡Œç’°å¢ƒ
  - æä¾›çµ±ä¸€çš„ API è«‹æ±‚åŒ…è£å™¨
  - æ”¯æ´ WebSocket é€£æ¥ç®¡ç†
  - ç’°å¢ƒè³‡è¨ŠæŸ¥è©¢åŠŸèƒ½

#### 2. å‰ç«¯ JavaScript æ–‡ä»¶æ›´æ–°
| æ–‡ä»¶ | ä¿®å¾©ç‹€æ…‹ | èªªæ˜ |
|------|---------|------|
| `website_prototype/script.js` | âœ… å·²ä¿®å¾© | ä¸»è¦å‰ç«¯é‚è¼¯ï¼Œä½¿ç”¨å‹•æ…‹ API é…ç½® |
| `website_prototype/script_api.js` | âœ… å·²ä¿®å¾© | API äº’å‹•é‚è¼¯ï¼Œæ”¯æ´ç’°å¢ƒè‡ªå‹•åµæ¸¬ |
| `website_prototype/data_source_manager.js` | âœ… å·²æœ‰æ­£ç¢ºé‚è¼¯ | è³‡æ–™ä¾†æºç®¡ç†ï¼ˆç„¡éœ€ä¿®æ”¹ï¼‰ |
| `website_prototype/debug_analytics.html` | âœ… å·²ä¿®å¾© | æ¸¬è©¦é é¢æ›´æ–°ç‚ºå‹•æ…‹ API |
| `website_prototype/test_analytics.html` | âœ… å·²ä¿®å¾© | åˆ†ææ¸¬è©¦é é¢ |
| `app/static/js/main.js` | âœ… å·²ä¿®å¾© | èˆŠç‰ˆå‰ç«¯ä¸»é‚è¼¯ |
| `app/static/js/websocket.js` | âœ… å·²ä¿®å¾© | WebSocket é€£æ¥é‚è¼¯ |

#### 3. HTML æ–‡ä»¶æ›´æ–°
| æ–‡ä»¶ | ä¿®å¾©ç‹€æ…‹ | èªªæ˜ |
|------|---------|------|
| `website_prototype/index.html` | âœ… å·²æ›´æ–° | æ·»åŠ  API é…ç½®è¼‰å…¥ |
| `website_prototype/data_source.html` | âœ… å·²æ›´æ–° | è³‡æ–™ä¾†æºç®¡ç†é é¢ |
| `website_prototype/data_source_clean.html` | âœ… å·²æ›´æ–° | æ¸…æ½”ç‰ˆè³‡æ–™ä¾†æºé é¢ |

#### 4. ç®¡ç†å¾Œå°æ”¯æ´
| æ–‡ä»¶ | ä¿®å¾©ç‹€æ…‹ | èªªæ˜ |
|------|---------|------|
| `app/admin/templates/dashboard_fixed.html` | âœ… å·²æœ‰å‹•æ…‹é‚è¼¯ | å›ºå®šç‰ˆç®¡ç†å¾Œå°ï¼ˆç„¡éœ€ä¿®æ”¹ï¼‰ |
| `app/admin/templates/dashboard.html` | âœ… å·²ä¿®å¾© | èˆŠç‰ˆç®¡ç†å¾Œå°ï¼Œæ·»åŠ å‹•æ…‹ URL æ›´æ–° |

#### 5. æ¸¬è©¦å·¥å…·
- **æ–°å¢**: `website_prototype/api_test.html`
- **åŠŸèƒ½**: å°ˆç”¨çš„ API é€£æ¥æ¸¬è©¦é é¢ï¼Œå¯é©—è­‰æ‰€æœ‰ä¸»è¦ç«¯é»

### ğŸ” ä¿®å¾©æŠ€è¡“ç´°ç¯€

#### ç’°å¢ƒè‡ªå‹•åµæ¸¬é‚è¼¯
```javascript
const currentHost = window.location.hostname;
if (currentHost === 'localhost' || currentHost === '127.0.0.1') {
    // æœ¬æ©Ÿç’°å¢ƒ
    apiURL = 'http://localhost:8001';
} else {
    // Radmin æˆ–å…¶ä»–ç¶²çµ¡ç’°å¢ƒ
    apiURL = `http://${currentHost}:8001`;
}
```

#### API é…ç½®é¡
```javascript
class APIConfig {
    constructor() {
        this.currentHost = window.location.hostname;
        this.initializeAPI();
    }
    
    buildAPIURL(endpoint) {
        return this.baseURL + endpoint;
    }
    
    async fetch(endpoint, options = {}) {
        // çµ±ä¸€çš„ API è«‹æ±‚è™•ç†
    }
}
```

### ğŸŒ ä½¿ç”¨èªªæ˜

#### æœ¬æ©Ÿè¨ªå•
- URL: `http://localhost:8001/website/`
- API è‡ªå‹•æŒ‡å‘: `http://localhost:8001`

#### Radmin ç¶²çµ¡è¨ªå•
- URL: `http://26.86.64.166:8001/website/`
- API è‡ªå‹•æŒ‡å‘: `http://26.86.64.166:8001`

#### API æ¸¬è©¦
- æ¸¬è©¦é é¢: `http://26.86.64.166:8001/website/api_test.html`
- åŠŸèƒ½: é©—è­‰æ‰€æœ‰ä¸»è¦ API ç«¯é»é€£é€šæ€§

### ğŸ“Š æ¸¬è©¦é©—è­‰

#### æ”¯æ´çš„ API ç«¯é»
- âœ… `/api/v1/health` - å¥åº·æª¢æŸ¥
- âœ… `/api/v1/frontend/stats` - ç³»çµ±çµ±è¨ˆ
- âœ… `/api/v1/frontend/quick-stats` - å¿«é€Ÿçµ±è¨ˆ
- âœ… `/api/v1/frontend/detection-results` - æª¢æ¸¬çµæœ
- âœ… `/api/v2/analysis/data-sources` - è³‡æ–™ä¾†æº
- âœ… `/api/v2/analysis/video` - è¦–é »åˆ†æ
- âœ… WebSocket é€£æ¥æ”¯æ´

#### ç’°å¢ƒç›¸å®¹æ€§
- âœ… æœ¬æ©Ÿé–‹ç™¼ç’°å¢ƒ (`localhost`, `127.0.0.1`)
- âœ… Radmin ç¶²çµ¡ç’°å¢ƒ (`26.86.64.166`)
- âœ… å…¶ä»–ç¶²çµ¡ç’°å¢ƒï¼ˆè‡ªå‹•åµæ¸¬ IPï¼‰

### ğŸ¯ è§£æ±ºçš„å•é¡Œ

1. **API è«‹æ±‚å¤±æ•—**: çµ„å“¡é€šé Radmin è¨ªå•æ™‚ä¸æœƒå†å‡ºç¾ API è«‹æ±‚éŒ¯èª¤
2. **ç¡¬ç·¨ç¢¼ URL**: ç§»é™¤æ‰€æœ‰ç¡¬ç·¨ç¢¼çš„ localhost å¼•ç”¨
3. **ç’°å¢ƒåˆ‡æ›**: ç„¡éœ€æ‰‹å‹•é…ç½®ï¼Œç³»çµ±è‡ªå‹•é©æ‡‰ç•¶å‰ç’°å¢ƒ
4. **WebSocket æ”¯æ´**: WebSocket é€£æ¥ä¹Ÿæ”¯æ´å‹•æ…‹åœ°å€
5. **å‘å¾Œå…¼å®¹**: ä¿æŒæ‰€æœ‰ç¾æœ‰åŠŸèƒ½æ­£å¸¸é‹ä½œ

### ğŸš€ å•Ÿå‹•æç¤ºæ›´æ–°

åœ¨ `start.py` ä¸­æ·»åŠ äº†æ–°çš„æç¤ºè³‡è¨Šï¼š
```
ğŸŒ Radmin ç¶²çµ¡è¨ªå•:
   - API é€£æ¥æ¸¬è©¦: http://26.86.64.166:8001/website/api_test.html
   âœ… çµ„å“¡å¯é€éæ‚¨çš„ Radmin IP è¨ªå•æ‰€æœ‰åŠŸèƒ½
   ğŸ”§ å‰ç«¯å·²æ”¯æ´è‡ªå‹•åµæ¸¬ API åœ°å€ï¼Œç„¡éœ€æ‰‹å‹•é…ç½®
```

### ğŸ‰ ä¿®å¾©å®Œæˆ

ç¾åœ¨æ‚¨çš„çµ„å“¡å¯ä»¥ï¼š
1. ç›´æ¥é€šé Radmin IP è¨ªå•ç¶²ç«™
2. è‡ªå‹•é€£æ¥åˆ°æ­£ç¢ºçš„ API ç«¯é»
3. ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½è€Œä¸æœƒå‡ºç¾é€£æ¥éŒ¯èª¤
4. é€šéæ¸¬è©¦é é¢é©—è­‰ç³»çµ±ç‹€æ…‹

**å•é¡Œå·²å®Œå…¨è§£æ±ºï¼** ğŸŠ
